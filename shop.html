<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Glyphbound: Depot</title> <link rel="stylesheet" href="style.css" />
  <style>
    /* LOCAL SHOP STYLES */
    #shop-screen { padding: 1rem; max-width: 600px; margin: 0 auto; }
    
    .shop-header {
        display: flex; justify-content: space-between; align-items: center;
        background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(5px);
        padding: 1rem; border-radius: 12px; border: 1px solid #334155;
        margin-bottom: 1.5rem;
    }
    
    .shop-grid {
        display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px; margin-bottom: 2rem;
    }
    
    .shop-card {
        background: linear-gradient(145deg, #1e293b, #0f172a);
        border: 1px solid #334155; border-radius: 12px; padding: 1rem;
        display: flex; flex-direction: column; align-items: center; text-align: center;
        transition: transform 0.2s, border-color 0.2s; box-shadow: 0 4px 6px rgba(0,0,0,0.3);
    }
    .shop-card:hover { transform: translateY(-5px); }
    .shop-card.combat { border-top: 3px solid #ef4444; }
    .shop-card.combat:hover { border-color: #f87171; box-shadow: 0 0 15px rgba(239, 68, 68, 0.3); }
    .shop-card.resource { border-top: 3px solid #38bdf8; }
    .shop-card.resource:hover { border-color: #7dd3fc; box-shadow: 0 0 15px rgba(56, 189, 248, 0.3); }
    
    .item-icon { font-size: 2.5rem; margin-bottom: 0.5rem; }
    .item-title { font-weight: 800; color: #fff; font-size: 0.9rem; margin-bottom: 4px; letter-spacing: 1px;}
    .item-desc { color: #94a3b8; font-size: 0.7rem; margin-bottom: 10px; min-height: 32px; }
    .item-stock { font-size: 0.75rem; color: #fff; background: rgba(0,0,0,0.3); padding: 2px 8px; border-radius: 4px; margin-bottom: 8px;}
    
    .buy-btn {
        background: #0f172a; border: 1px solid #475569; color: #38bdf8;
        padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 0.8rem; font-weight: bold;
        width: 100%; transition: all 0.2s;
    }
    .buy-btn:hover { background: #38bdf8; color: #000; }
    
    .section-label { color: #94a3b8; font-size: 0.8rem; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 10px; border-bottom: 1px solid #334155; padding-bottom: 5px; }
  </style>
</head>

<body id="map-screen"> <div class="shop-header">
      <div>
          <h2 style="margin:0; color:#fff; text-shadow:0 0 10px #38bdf8;">GLYPHBOUND DEPOT</h2>
          <div style="font-size:0.7rem; color:#94a3b8;">TACTICAL ASSETS</div>
      </div>
      <button class="nav-btn" onclick="window.location.href='map.html'">EXIT</button>
  </div>

  <div id="map-currencies" style="margin-bottom:2rem;">
      <div class="currency" style="border-color:#facc15; color:#facc15">‚ö° <span id="energy-amt">--</span></div>
      <div class="currency" style="border-color:#0ea5e9; color:#0ea5e9">üíé <span id="prisma-amt">--</span></div>
      <div class="currency" style="border-color:#f472b6; color:#f472b6">ü™ô <span id="aurum-amt">--</span></div>
  </div>

  <div class="section-label">Combat Consumables</div>
  <div class="shop-grid">
    <div class="shop-card combat">
      <div class="item-icon">üí£</div>
      <div class="item-title">BOMB</div>
      <div class="item-desc">Destroy 5 random tiles. Clears hazards.</div>
      <div class="item-stock">OWNED: <span id="stock-bomb">0</span></div>
      <button class="buy-btn" onclick="doAction('buyBomb')">30 üíé</button>
    </div>
    <div class="shop-card combat">
      <div class="item-icon">‚è≥</div>
      <div class="item-title">HOURGLASS</div>
      <div class="item-desc">Extends mission time. +5 Moves.</div>
      <div class="item-stock">OWNED: <span id="stock-hourglass">0</span></div>
      <button class="buy-btn" onclick="doAction('buyHourglass')">40 üíé</button>
    </div>
    <div class="shop-card combat">
      <div class="item-icon">üß™</div>
      <div class="item-title">ANTIDOTE</div>
      <div class="item-desc">Neutralizes all Poison on the board.</div>
      <div class="item-stock">OWNED: <span id="stock-antidote">0</span></div>
      <button class="buy-btn" onclick="doAction('buyAntidote')">20 üíé</button>
    </div>
  </div>

  <div class="section-label">Logistics</div>
  <div class="shop-grid">
    <div class="shop-card resource">
      <div class="item-icon">‚ö°</div>
      <div class="item-title">RECHARGE</div>
      <div class="item-desc">Restores +1 Energy immediately.</div>
      <button class="buy-btn" onclick="doAction('buyEnergy')">50 üíé</button>
    </div>
    <div class="shop-card resource">
      <div class="item-icon">üíé</div>
      <div class="item-title">EXCHANGE</div>
      <div class="item-desc">Convert Aurum to Prisma currency.</div>
      <button class="buy-btn" onclick="doAction('convertAurum')">1 ü™ô</button>
    </div>
    <div class="shop-card resource">
      <div class="item-icon">üì∫</div>
      <div class="item-title">SIGNAL</div>
      <div class="item-desc">Watch ad stream for +3 Energy.</div>
      <button class="buy-btn" onclick="doAction('watchAd')">FREE</button>
    </div>
  </div>

  <script src="economy.js"></script>
  <script>
    function updateUI() {
      economy.regenerateEnergy();
      document.getElementById("energy-amt").textContent = economy.getEnergy();
      document.getElementById("prisma-amt").textContent = economy.getPrisma();
      document.getElementById("aurum-amt").textContent = economy.getAurum();
      
      document.getElementById("stock-bomb").textContent = economy.getItemCount('bomb');
      document.getElementById("stock-hourglass").textContent = economy.getItemCount('hourglass');
      document.getElementById("stock-antidote").textContent = economy.getItemCount('antidote');
    }

    function doAction(action) {
        let result = false;
        if (action === 'buyBomb') result = economy.buyItem('bomb');
        else if (action === 'buyHourglass') result = economy.buyItem('hourglass');
        else if (action === 'buyAntidote') result = economy.buyItem('antidote');
        else if (action === 'watchAd') {
            alert("Watching Ad Stream... [||||||||||]");
            result = economy.watchAdForEnergy();
            if(result) alert("Thank you! +3 Energy received.");
        } 
        else if (action === 'buyEnergy') result = economy.buyEnergyWithPrisma();
        else if (action === 'convertAurum') result = economy.exchangeAurumToPrisma();

        if(!result && action.startsWith('buy')) alert("Insufficient Funds!");
        updateUI();
    }
    updateUI();
  </script>
</body>
</html>